<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>link-click-support.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Routing.Router.html">Router</a><ul class='methods'><li data-type='method'><a href="Routing.Router.html#destroy">destroy</a></li><li data-type='method'><a href="Routing.Router.html#navigate">navigate</a></li><li data-type='method'><a href="Routing.Router.html#notFound">notFound</a></li><li data-type='method'><a href="Routing.Router.html#registerRoutes">registerRoutes</a></li></ul></li></ul><h3>Namespaces</h3><ul><li><a href="Routing.html">Routing</a><ul class='methods'><li data-type='method'><a href="Routing.html#.computePage">computePage</a></li><li data-type='method'><a href="Routing.html#.findMatchingRoutes">findMatchingRoutes</a></li><li data-type='method'><a href="Routing.html#.initializeLinkClickSupport">initializeLinkClickSupport</a></li><li data-type='method'><a href="Routing.html#.isRouteActive">isRouteActive</a></li></ul></li></ul><h3>Interfaces</h3><ul><li><a href="Routing.RouteDefinition.html">RouteDefinition</a></li><li><a href="Routing.RouterHooks.html">RouterHooks</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">link-click-support.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.initializeLinkClickSupport = void 0;
const getSameOriginLinkHref = (event) => {
    if (event.button !== 0) {
        return null;
    }
    // We don't want modified clicks, where the intent is to open the page
    // in a new tab.
    if (event.metaKey || event.ctrlKey) {
        return null;
    }
    const eventPath = event.composedPath();
    let anchor = null;
    for (let i = 0; i &lt; eventPath.length; i++) {
        const element = eventPath[i];
        if (element.tagName === 'A' &amp;&amp; element.href) {
            anchor = element;
            break;
        }
    }
    // If there's no link there's nothing to do.
    if (!anchor) {
        return null;
    }
    // Target blank is a new tab, don't intercept.
    if (anchor.target === '_blank') {
        return null;
    }
    // If the link is for an existing parent frame, don't intercept.
    if ((anchor.target === '_top' || anchor.target === '_parent') &amp;&amp; window.top !== window) {
        return null;
    }
    // If the link is a download, don't intercept.
    if (anchor.download) {
        return null;
    }
    const href = anchor.href;
    // It only makes sense for us to intercept same-origin navigations.
    // pushState/replaceState don't work with cross-origin links.
    let url;
    if (document.baseURI != null) {
        url = new URL(href, /** @type {string} */ document.baseURI);
    }
    else {
        url = new URL(href);
    }
    let origin;
    // IE Polyfill
    if (window.location.origin) {
        origin = window.location.origin;
    }
    else {
        origin = window.location.protocol + '//' + window.location.host;
    }
    let urlOrigin;
    if (url.origin) {
        urlOrigin = url.origin;
    }
    else {
        // IE always adds port number on HTTP and HTTPS on &lt;a>.host but not on
        // window.location.host
        let urlHost = url.host;
        const urlPort = url.port;
        const urlProtocol = url.protocol;
        const isExtraneousHTTPS = urlProtocol === 'https:' &amp;&amp; urlPort === '443';
        const isExtraneousHTTP = urlProtocol === 'http:' &amp;&amp; urlPort === '80';
        if (isExtraneousHTTPS || isExtraneousHTTP) {
            urlHost = url.hostname;
        }
        urlOrigin = urlProtocol + '//' + urlHost;
    }
    if (urlOrigin !== origin)
        return null;
    let normalizedHref = url.pathname + url.search + url.hash;
    // pathname should start with '/', but may not if `new URL` is not supported
    if (normalizedHref[0] !== '/')
        normalizedHref = '/' + normalizedHref;
    // Need to use a full URL in case the containing page has a base URI.
    return new URL(normalizedHref, window.location.href).href;
};
/**
 * Adds navigation functionality on click event
 * @function
 * @memberof Routing
 * @name initializeLinkClickSupport
 * @since v1.0.2
 * @param {Routing.Router} router Router instance
 */
exports.initializeLinkClickSupport = (router) => {
    document.body.addEventListener('click', (e) => {
        if (!e.defaultPrevented) {
            const href = getSameOriginLinkHref(e);
            if (href) {
                e.preventDefault();
                router.navigate(href);
            }
        }
    });
};
exports.default = exports.initializeLinkClickSupport;
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.6</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
